{"version":3,"sources":["js/utils.js"],"names":["jsonp","_doAjax","opt","o","window","XMLHttpRequest","ActiveXObject","Error","type","toUpperCase","async","dataType","jsonpCallback","randomNum","Date","getTime","url","data","timeout","error","success","complete","t","oScript","document","createElement","src","indexOf","body","appendChild","removeChild","onreadystatechange","readyState","status","JSON","parse","responseText","responseXML","clearTimeout","open","setRequestHeader","send","setTimeout","abort","ajax","post","successCB","errorCB","completeCB","csuccessCB","get"],"mappings":"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","file":"utils.fb27d1a4.js","sourceRoot":"..\\src","sourcesContent":["var jsonp = (function () {\n\n  function _doAjax(opt) {\n    var o = window.XMLHttpRequest ?\n      new XMLHttpRequest() :\n      new ActiveXObject('Microsoft.XMLHTTP');\n\n    if (!o) {\n      throw new Error('您的浏览器不支持异步发起HTTP请求');\n    }\n\n    var opt = opt || {},\n      type = (opt.type || 'GET').toUpperCase(),\n      async = '' + opt.async === 'false' ? false : true,\n      dataType = opt.dataType || 'JSON',\n      jsonp = opt.jsonp || 'cb',\n      jsonpCallback = opt.jsonpCallback || 'jQuery' + randomNum() + '_' + new Date().getTime(),\n      url = opt.url,\n      data = opt.data || null,\n      timeout = opt.timeout || 30000,\n      error = opt.error || function () { },\n      success = opt.success || function () { },\n      complete = opt.complete || function () { },\n      t = null;\n\n    if (!url) {\n      throw new Error('您没有填写URL');\n    }\n\n    if (dataType.toUpperCase() === 'JSONP' && type !== 'GET') {\n      throw new Error('如果dataType为JSONP，type请您设置GET或不设置');\n    }\n\n    if (dataType.toUpperCase() === 'JSONP') {\n      var oScript = document.createElement('script');\n      oScript.src = url.indexOf('?') === -1\n        ? url + '?' + jsonp + '=' + jsonpCallback\n        : url + '&' + jsonp + '=' + jsonpCallback;\n      document.body.appendChild(oScript);\n      document.body.removeChild(oScript);\n      window[jsonpCallback] = function (data) {\n        success(data);\n      };\n      return;\n    }\n\n    o.onreadystatechange = function () {\n      if (o.readyState === 4) {\n        if ((o.status >= 200 && o.status < 300) || o.status === 304) {\n          switch (dataType.toUpperCase()) {\n            case 'JSON':\n              success(JSON.parse(o.responseText));\n              break;\n            case 'TEXT':\n              success(o.responseText);\n              break;\n            case 'XML':\n              success(o.responseXML);\n              break;\n            default:\n              success(JSON.parse(o.responseText));\n          }\n        } else {\n          error();\n        }\n        complete();\n        clearTimeout(t);\n        t = null;\n        o = null;\n      }\n    }\n\n    o.open(type, url, async);\n    type === 'POST' && o.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n    // o.send(type === 'GET' ? null : formatDatas(data));\n    o.send();\n\n    t = setTimeout(function () {\n      o.abort();\n      clearTimeout(t);\n      t = null;\n      o = null;\n      throw new Error('本次请求已超时，API地址：' + url);\n    }, timeout);\n  }\n\n  // function formatDatas(obj) {\n  //   var str = '';\n  //   for (var key in obj) {\n  //     str += key + '=' + obj[key] + '&';\n  //   }\n  //   return str.replace(/&$/, '');\n  // }\n\n  // function randomNum() {\n  //   var num = '';\n  //   for (var i = 0; i < 20; i++) {\n  //     num += Math.floor(Math.random() * 10);\n  //   }\n  //   return num;\n  // }\n\n  return {\n    ajax: function (opt) {\n      _doAjax(opt);\n    },\n\n    post: function (url, data, dataType, successCB, errorCB, completeCB) {\n      _doAjax({\n        type: 'POST',\n        url: url,\n        data: data,\n        dataType: dataType,\n        success: csuccessCB,\n        error: errorCB,\n        complete: completeCB\n      });\n    },\n\n    get: function (url, dataType, successCB, errorCB, completeCB) {\n      _doAjax({\n        type: 'GET',\n        url: url,\n        dataType: dataType,\n        success: successCB,\n        error: errorCB,\n        complete: completeCB\n      })\n    }\n  }\n})();"]}